!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e){t.exports=jQuery},function(t,e){t.exports=Vue},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){t.exports=Vuex},function(t,e){t.exports=VueRouter},function(t,e,n){t.exports=n(18)},function(t,e,n){},function(t,e,n){"use strict";var i=n(2);n.n(i).a},function(t,e,n){"use strict";var i=n(3);n.n(i).a},function(t,e,n){"use strict";var i=n(4);n.n(i).a},function(t,e,n){"use strict";var i=n(5);n.n(i).a},function(t,e,n){"use strict";var i=n(6);n.n(i).a},function(t,e,n){"use strict";var i=n(7);n.n(i).a},function(t,e,n){"use strict";n.r(e);n(11);var i=n(1),s=n.n(i),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"header"},[n("h1",{on:{click:function(e){return t.gotoIndex()}}},[t._v("CrowdSpec")]),t._v(" "),n("span",[t._v(t._s(t.username))]),t._v(" "),n("button",{attrs:{size:"mini"},on:{click:function(e){return t.logout()}}},[t._v("Log out")])]),t._v(" "),n("div",{staticClass:"content-area"},[n("router-view")],1)])};o._withStripped=!0;var r=n(0),a=n.n(r),c=n(8),u=n.n(c);s.a.use(u.a);var l=a()(window),p=new u.a.Store({state:{windowWidth:l.width()},getters:{userID:function(t){return window.user.id},username:function(t){return window.user.username},dialogTinyWidth:function(t){return t.windowWidth<=767?"80%":t.windowWidth<=991?"50%":"30%"},dialogSmallWidth:function(t){return t.windowWidth<=767?"90%":t.windowWidth<=991?"75%":"50%"},dialogLargeWidth:function(t){return t.windowWidth<=991?"95%":"90%"}},mutations:{setWindowWidth:function(t,e){t.windowWidth=e}}}),d=p;l.on("resize",(function(){p.commit("setWindowWidth",l.width())}));var f=n(9),v=n.n(f),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-page"},[n("el-button",{on:{click:function(e){return t.gotoNewSpec()}}},[t._v("New Spec")]),t._v(" "),n("div",{staticClass:"user-specs"},[n("h2",[t._v("Your specs")]),t._v(" "),t.loading?n("p",[t._v("Loading...")]):t.userSpecs&&t.userSpecs.length?n("ul",t._l(t.userSpecs,(function(e){return n("li",{key:e.id},[n("router-link",{attrs:{to:{name:"spec",params:{specId:e.id}}}},[t._v(t._s(e.name))])],1)})),0):n("p",[t._v("You do not have any specs")])]),t._v(" "),n("div",{staticClass:"public-specs"},[n("h2",[t._v("Public specs")]),t._v(" "),t.loading?n("p",[t._v("Loading public specs...")]):t.publicSpecs&&t.publicSpecs.length?n("ul",t._l(t.publicSpecs,(function(e){return n("li",{key:e.id},[n("router-link",{attrs:{to:{name:"spec",params:{specId:e.id}}}},[t._v(t._s(e.name))])],1)})),0):n("p",[t._v("No public specs")])])],1)};function _(t){if(console.error(t),t){var e=null;if(0===t.readyState?e="Could not connect to server":t.readyState&&t.status?e="Request failed with error code "+t.status:t.message?e=t.message:"string"==typeof t&&(e=t),e)return void s.a.prototype.$alert(e,"Error",{confirmButtonText:"Ok",type:"error"})}s.a.prototype.$alert("An error occurred",{confirmButtonText:"Ok",type:"error"})}h._withStripped=!0;var m={data:function(){return{userSpecs:[],publicSpecs:[],loading:!0}},mounted:function(){this.reloadSpecs()},beforeRouteUpdate:function(t,e,n){this.reloadSpecs(),n()},methods:{reloadSpecs:function(){var t=this;this.loading=!0,a.a.get("/ajax/user-specs").then((function(e){t.userSpecs=e,a.a.get("/ajax/public-specs").then((function(e){t.publicSpecs=e,t.loading=!1})).fail((function(e){t.loading=!1,_(e)}))})).fail((function(e){t.loading=!1,_(e)}))},gotoNewSpec:function(){this.$router.push({name:"new-spec"})}}};n(12);function b(t,e,n,i,s,o,r,a){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=c):s&&(c=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:u}}var w=b(m,h,[],!1,null,null,null);w.options.__file="src/pages/index.vue";var S=w.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-spec-page"},[n("label",[t._v("\n\t\tName:\n\t\t"),n("el-input",{ref:"nameInput",attrs:{clearable:""},model:{value:t.newSpecName,callback:function(e){t.newSpecName=e},expression:"newSpecName"}})],1),t._v(" "),n("label",[t._v("\n\t\tDescription:\n\t\t"),n("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.newSpecDesc,callback:function(e){t.newSpecDesc=e},expression:"newSpecDesc"}})],1),t._v(" "),n("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("Cancel")]),t._v(" "),n("el-button",{attrs:{disabled:t.disableCreate,type:"primary"},on:{click:function(e){return t.create()}}},[t._v("Create")])],1)};function x(t){return a.a.get("/ajax/spec",{specId:t}).fail(_)}function y(t,e,n,i,s){return a.a.post("/ajax/spec/add-subpoint",{specId:t,parentId:e,title:i,desc:s}).fail(_)}g._withStripped=!0;var C={data:function(){return{newSpecName:"",newSpecDesc:""}},computed:{disableCreate:function(){return!this.newSpecName.trim()}},beforeRouteEnter:function(t,e,n){n((function(t){return t.nextTickFocusNameInput()}))},beforeRouteUpdate:function(t,e,n){this.newSpecName="",this.newSpecDesc="",this.nextTickFocusNameInput(),n()},methods:{nextTickFocusNameInput:function(){var t=this;this.$nextTick((function(){a()("input",t.$refs.nameInput.$el).focus()}))},cancel:function(){this.$router.push({name:"index"})},create:function(){var t,e,n=this;this.disableCreate||(t=this.newSpecName,e=this.newSpecDesc,a.a.post("/ajax/spec/create",{name:t,desc:e}).fail(_)).then((function(t){n.$router.push({name:"spec",params:{specId:t}})}))}}},$=(n(13),b(C,g,[],!1,null,null,null));$.options.__file="src/pages/new-spec.vue";var k=$.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.spec?n("div",{staticClass:"spec-page"},[n("h2",[t._v(t._s(t.spec.name))]),t._v(" "),t.spec.desc?n("div",{staticClass:"desc"},[t._v(t._s(t.spec.desc))]):t._e(),t._v(" "),n("p",[t._v("Owner: "+t._s(t.spec.ownerName))]),t._v(" "),n("p",[t._v("Created: "+t._s(t.spec.created))]),t._v(" "),t.spec.public?n("p",[t._v("Public")]):n("p",[t._v("Not public")]),t._v(" "),t.spec.userIsAdmin?n("p",[t._v("You are admin")]):t._e(),t._v(" "),t.spec.userIsContributor?n("p",[t._v("You are a contributor")]):t._e(),t._v(" "),n("hr"),t._v(" "),n("spec-ul",{attrs:{"spec-id":t.spec.id,"initial-points":t.spec.points}})],1):t._e()};I._withStripped=!0;var N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spec-points"},[n("ul",{staticClass:"spec-ul"},[t._l(t.points,(function(e){return n("spec-li",{key:e.id,attrs:{"initial-point":e},on:{"add-subpoint":t.addSubpoint}})})),t._v(" "),n("li",[n("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.addRootPoint()}}},[t._v("Add root point")])],1)],2),t._v(" "),n("add-point-modal",{ref:"addPointModal"})],1)};N._withStripped=!0;var P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"spec-add-point-modal",attrs:{title:"Add point",visible:t.showing,width:t.$store.getters.dialogTinyWidth},on:{"update:visible":function(e){t.showing=e},closed:function(e){return t.closed()}}},[n("label",[t._v("\n\t\tTitle\n\t\t"),n("el-input",{ref:"titleInput",attrs:{clearable:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),n("label",[t._v("\n\t\tDescription\n\t\t"),n("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}})],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.showing=!1}}},[t._v("Cancel")]),t._v(" "),n("el-button",{attrs:{type:"primary",disabled:t.disableSubmit},on:{click:function(e){return t.submit()}}},[t._v("Add")])],1)])};P._withStripped=!0;var j={data:function(){return{showing:!1,callback:null,title:"",desc:""}},computed:{disableSubmit:function(){return!(this.title.trim()||this.desc.trim())}},methods:{show:function(t){var e=this;this.callback=t,this.showing=!0,this.$nextTick((function(){a()("input",e.$refs.titleInput.$el).focus()}))},submit:function(){var t=this;this.disableSubmit||this.callback(this.title,this.desc,(function(){t.showing=!1}))},closed:function(){this.callback=null,this.title="",this.desc=""}}},R=(n(14),b(j,P,[],!1,null,null,null));R.options.__file="src/spec/add-point-modal.vue";var E=R.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"spec-li"},[n("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),t.desc?n("div",{staticClass:"desc"},[t._v(t._s(t.desc))]):t._e(),t._v(" "),n("ul",{staticClass:"subpoints"},[t.subpoints.length?t._l(t.subpoints,(function(e){return n("spec-li",{key:e.id,attrs:{"initial-point":e},on:{"add-subpoint":t.raiseAddSubpoint}})})):t._e(),t._v(" "),n("li",[n("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.addSubpoint()}}},[t._v("Add subpoint")])],1)],2)])};T._withStripped=!0;var W={name:"spec-li",props:{initialPoint:Object},data:function(){return{id:this.initialPoint.id,title:this.initialPoint.title,desc:this.initialPoint.desc,subpoints:this.initialPoint.points||[]}},methods:{addSubpoint:function(){var t=this;this.raiseAddSubpoint(this.id,this.subpoints.length,(function(e){t.subpoints.push(e)}))},raiseAddSubpoint:function(t,e,n){this.$emit("add-subpoint",t,e,n)}}},O=(n(15),b(W,T,[],!1,null,null,null));O.options.__file="src/spec/spec-li.vue";var A=b({components:{AddPointModal:E,SpecLi:O.exports},props:{specId:Number,initialPoints:Array},data:function(){return{points:this.initialPoints?this.initialPoints.slice():[]}},methods:{addRootPoint:function(){var t=this;this.$refs.addPointModal.show((function(e,n,i){y(t.specId,0,t.points.length,e,n).then((function(e){t.points.push(e),i()}))}))},addSubpoint:function(t,e,n){var i=this;this.$refs.addPointModal.show((function(e,s,o){y(i.specId,t,0,e,s).then((function(t){n(t),o()}))}))}}},N,[],!1,null,null,null);A.options.__file="src/spec/spec-ul.vue";var D={components:{SpecUl:A.exports},data:function(){return{spec:null}},beforeRouteEnter:function(t,e,n){x(t.params.specId).then((function(t){n((function(e){e.spec=t}))})).fail((function(t){n({name:"ajax-error",params:{code:t.status},replace:!0})}))},beforeRouteUpdate:function(t,e,n){var i=this;x(t.params.specId).then((function(t){i.spec=t,n()})).fail((function(t){n({name:"ajax-error",params:{code:t.status},replace:!0})}))},methods:{}},M=(n(16),b(D,I,[],!1,null,null,null));M.options.__file="src/pages/spec.vue";var z=M.exports,U=function(){var t=this.$createElement;return(this._self._c||t)("div",[0===parseInt(this.$route.params.code,10)?[this._v("\n\t\tCould not connect to server\n\t")]:[this._v("\n\t\tRequest failed with error code "+this._s(this.$route.params.code)+"\n\t")]],2)};U._withStripped=!0;var L=b({},U,[],!1,null,null,null);L.options.__file="src/pages/ajax-error.vue";var V=L.exports,F=function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n\tNot found\n")])};F._withStripped=!0;var Y=b({},F,[],!1,null,null,null);Y.options.__file="src/pages/not-found.vue";var q=Y.exports,B={store:d,router:new v.a({mode:"history",routes:[{name:"index",path:"/",component:S},{name:"new-spec",path:"/new-spec",component:k},{name:"spec",path:"/spec/:specId",component:z},{name:"ajax-error",path:"/ajax-error/:code",component:V},{path:"*",component:q}]}),computed:{username:function(){return this.$store.getters.username}},methods:{gotoIndex:function(){"index"!==this.$route.name&&this.$router.push({name:"index"})},logout:function(){window.location.href="/logout"}}},X=(n(17),b(B,o,[],!1,null,null,null));X.options.__file="src/app.vue";var Q=X.exports;new s.a(Q).$mount("#app")}]);