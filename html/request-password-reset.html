<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"/>

<title>CrowdSpec</title>

<link rel="shortcut icon" href="/img/favicon.ico"/>
<link rel="stylesheet" href="/css/login.css"/>

<script src="https://www.google.com/recaptcha/api.js" async defer></script>

</head>
<body>

	<h1>CrowdSpec</h1>

	<div class="content-area">

		<h2>Request password reset</h2>

		{{if eq .Mode "sent"}}

			<p>An email with a link to reset your password has been sent to <span style="text-decoration:underline;">{{.Email}}</span>.</p>

		{{else}}

			{{if eq .Error 404}}
			<p class="error">User not found</p>
			{{else if eq .Error 418}}
			<p class="error">Invalid reCAPTCHA</p>
			{{else if eq .Error 400}}
			<p class="error">Bad request</p>
			{{else if eq .Error 500}}
			<p class="error">Server error</p>
			{{end}}

			<form id="form" action="/request-password-reset" method="POST">
				<table>
					<tr>
						<td><label for="email">Email address</label></td>
						<td><input id="email" name="email" type="email" autocapitalize="none"/></td>
					</tr>
					<tr>
						<td colspan="2">
							<div class="g-recaptcha"
								data-sitekey="{{.SiteKey}}"
								data-callback="recaptchaSuccess"
								data-expired-callback="recaptchaExpired"
								data-error-callback="recaptchaError"></div>
						</td>
					</tr>
					<tr>
						<td></td>
						<td><button id="submitButton" type="submit" disabled>Send email</button></td>
					</tr>
				</table>
			</form>

		{{end}}

		<p><a href="/login">Back to login</a></p>

	</div>

	<script src="/js/request-password-reset.js"></script>

</body>
</html>
